{% extends "datasets.html" %}

{% block nav_links__secondary__extra %}
<li><a href="/data/{{ path }}/delete">Delete this dataset</a></li>
{% endblock %}

{% block content %}
{% if raw is defined %}
  <section class="dataset dataset--raw-readme">
    <h2>README</h2>
    {% if raw.readme is defined %}
      <pre>{{ raw.readme }}</pre>
    {% else %}
      <p style="error">Not found!</p>
    {% endif %}
  </section>

  <section class="dataset dataset--raw-bop">
    <h2>Bill of Process</h2>
    {% if raw.bop is defined %}
      <pre>{{ raw.bop }}</pre>
    {% else %}
      <p style="error">Not found!</p>
    {% endif %}
  </section>
{% else %}
  <section class="dataset dataset--error">
    <h2>Files missing</h2>
    <p class="error">Cannot find any relevant files: readme.txt, bop.yaml</p>
  </section>
{% endif %}
{% if bop is defined %}
  <section class="dataset dataset--bop">
    <h2>Parsed BOP</h2>
    {% if bop.organizations is defined %}
      <h3>Organizations</h3>
      <dl>
        {% for org in bop.organizations %}
          <dt>Prefix</dt><dd>{{ org.prefix }}</dd>
          <dt>Number</dt><dd>{{ org.number }}</dd>
        {% endfor %}
      </dl>
    {% else %}
      <p class="error">Can't find any organizations.</p>
    {% endif %}
  </section>
{% else %}
  <section class="dataset dataset--error">
    <h2>BOP missing</h2>
    <p class="error">Cannot find any data corresponding to Bill of Process.</p>
  </section>
{% endif %}
{% endblock %}
