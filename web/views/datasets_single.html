{% extends "datasets.html" %}

{% block nav_links__secondary__extra %}
<li><a href="/data/{{ path }}/delete">Delete this dataset</a></li>
{% endblock %}

{% block content %}
<section class="dataset dataset--raw-readme">
  <h2>README</h2>
  {% if raw.readme is defined %}
    <pre>{{ raw.readme }}</pre>
  {% else %}
    <p style="error">Not found!</p>
  {% endif %}
</section>

<section class="dataset dataset--raw-bop">
  <h2>Bill of Process</h2>
  {% if raw.bop is defined %}
    <pre>{{ raw.bop }}</pre>
  {% else %}
    <p style="error">Not found!</p>
  {% endif %}
</section>
{% if bop is defined %}
  <section class="dataset dataset--bop">
    <h2>Parsed BOP</h2>
    {% if bop.populations is defined %}
      <h3>Populations</h3>
      <dl>
        {% for pop in bop.populations %}
          <dt>Number</dt><dd>{{ pop.number }}</dd>
        {% endfor %}
      </dl>
    {% else %}
      <p class="error">Can't find any populations.</p>
    {% endif %}
  </section>
{% else %}
  <section class="dataset dataset--error">
    <h2>BOP missing</h2>
    <p class="error">Cannot find any data corresponding to Bill of Process.</p>
  </section>
{% endif %}
{% if more_info is defined %}
    <section class="dataset dataset--raw-data">
        <h2>All entities</h2>
        <table>
            <tr><th>ID</th><th>Name</th></tr>
            {% for entity in more_info.entity %}
            <tr><td>{{ entity.id }}</td><td>{{ entity.name }}</td></tr>
            {% endfor %}
        </table>
    </section>
{% else %}
    <section class="dataset dataset--error">
        <h2>Entities not found</h2>
        <p class="error">No entities found; the database file could be missing or misnamed?</p>
    </section>
{% endif %}

{% endblock %}
